variable  A string bulkNi
log		$A.log

boundary        p p p
units           metal

lattice         fcc 3.52
region          box block 0 15 0 15 0 15
create_box      1 box
create_atoms    1 box

pair_style      none
mass            * 58.71
atom_modify     sort 0 0

# Diffraction computes
compute         XRD all xrd 1.541838 Ni 2Theta 40 80 c 2 2 2 LP 1 echo

compute         SAED all saed 0.0251 Ni c 0.025 0.025 0.025 manual &
                Kmax 0.85 Zone 1 0 0 dR_Ewald 0.05 echo

<<<<<<< HEAD
# Fixes to write 3D diffraction data in different formats (xyz and vtk)
# Filenames are appended automatically with index and extension: filename.INDEX.EXTENSION
#
# NOTE: "threshold" sets a minimum intensity and is applied only to xyz format

fix             1 all diffraction 1 1 5 c_XRD format xyz format vtk threshold 10 file $A_XRD timestep
fix             2 all diffraction 1 1 5 c_SAED format xyz format vtk threshold 10 file $A_SAED
=======
compute         SAED all saed 0.0251  Ni Kmax 0.85 &
                Zone 0 0 0 c 0.025 0.025 0.025 &
                dR_Ewald 0.01 echo manual

fix             1 all ave/histo/weight 1 1 1 40 80 200 c_XRD[1] c_XRD[2] &
                mode vector file $A.hist.xrd
>>>>>>> origin/master

# Fix to compute powder diffraction line profile by binning diffraction data by scattering angle
fix             3 all ave/histo/weight 1 1 5 40 80 200 c_XRD[1] c_XRD[2] mode vector file $A.xrd

#dump            1 all custom 1 $A.dump id x y z
run             0

unfix           1
unfix           2
uncompute       XRD
uncompute       SAED
